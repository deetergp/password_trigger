<?php
/**
 * Implements hook_trigger_info()
 *
 * The first key in the array provides the name of the tab on the Triggers
 * page to which the trigger will be assigned.
 */
function password_trigger_trigger_info() {
  return array(
    'password_trigger' => array(
      'password_trigger' => array(
        'label' => t('A password is updated'),
        ),
      ),
    );
}

/**
 * Implementation of hook_user_update().
 *
 * Only fires when the 'pass' key is present in the $edit array.
 */
function password_trigger_user_update(&$edit, $account, $category) {
  if ($category == 'account') {
    if (array_key_exists('pass', $edit)) {
      // password is changed, fire trigger
      password_trigger_change($account->mail, user_preferred_language($account));
    }
  }
}

